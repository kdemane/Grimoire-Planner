  SELECT v.*
       , (v.r_Atk + v.r_Spd + v.r_Def) r_prio
    FROM (SELECT rj.id
               , (rjs_Atk.growth / ((999 - rjs_Atk.initial) / 98)) r_Atk
               , (((rjs_Spd.growth / ((150 - rjs_Spd.initial) / 98)) * 5) / 3) r_Spd
               , (rjs_Def.growth / ((999 - rjs_Def.initial) / 98)) r_Def
            FROM race_job rj
            JOIN race r
              ON rj.race_id = r.id
            JOIN race_job_stat rjs_Atk
              ON rj.id = rjs_Atk.race_job_id
            JOIN race_job_stat rjs_Spd
              ON rj.id = rjs_Spd.race_job_id
            JOIN race_job_stat rjs_Def
              ON rj.id = rjs_Def.race_job_id
           WHERE r.id = 1
             AND rjs_Atk.stat_id = 4
             AND rjs_Spd.stat_id = 3
             AND rjs_Def.stat_id = 5) v
ORDER BY (FLOOR(r_Atk) && FLOOR(r_Spd) && FLOOR(r_Def)) DESC
       , FLOOR(r_Atk) DESC
       , r_prio DESC;




  SELECT v.*
       , (v.tot_Atk + v.tot_Spd + v.tot_Def) tot_prio
       , (v.r_Atk + v.r_Spd + v.r_Def) r_prio
    FROM (SELECT CONCAT(r.name, ' ', j.name) race_job
               , (rjs_Atk.initial + (rjs_Atk.growth * 29)) tot_Atk
               , (rjs_Atk.growth / ((999 - rjs_Atk.initial) / 98)) r_Atk
               , (((rjs_Spd.initial + (rjs_Spd.growth * 29)) * 5) / 3) tot_Spd
               , (((rjs_Spd.growth / ((150 - rjs_Spd.initial) / 98)) * 5) / 3) r_Spd
               , (rjs_Def.initial + (rjs_Def.growth * 29)) tot_Def
               , (rjs_Def.growth / ((999 - rjs_Def.initial) / 98)) r_Def
            FROM race_job rj
            JOIN race r
              ON rj.race_id = r.id
            JOIN job j
              ON rj.job_id = j.id
            JOIN race_job_stat rjs
              ON rj.id = rjs.race_job_id
            JOIN race_job_stat rjs_Atk
              ON rj.id = rjs_Atk.race_job_id
            JOIN race_job_stat rjs_Spd
              ON rj.id = rjs_Spd.race_job_id
            JOIN race_job_stat rjs_Def
              ON rj.id = rjs_Def.race_job_id
           WHERE r.id = 1
             AND rjs_Atk.stat_id = 4
             AND rjs_Spd.stat_id = 3
             AND rjs_Def.stat_id = 5
        GROUP BY rj.id) v
ORDER BY FLOOR(r_Atk) DESC
       , r_prio DESC;


  SELECT CONCAT(r.name, ' ', j.name) race_job
       , (rjs_Atk.initial + (rjs_Atk.growth * 29)) total_Atk
       , (rjs_Atk.growth / ((999 - rjs_Atk.initial) / 98)) r_Atk
       , (rjs_Spd.initial + (rjs_Spd.growth * 29)) total_Spd
       , (rjs_Spd.growth / ((150 - rjs_Spd.initial) / 98)) r_Spd
       , (rjs_Def.initial + (rjs_Def.growth * 29)) total_Def
       , (rjs_Def.growth / ((999 - rjs_Def.initial) / 98)) r_Def
       , SUM(rjs.initial + (rjs.growth * 29)) total_all
    FROM race_job rj
    JOIN race r
      ON rj.race_id = r.id
    JOIN job j
      ON rj.job_id = j.id
    JOIN race_job_stat rjs
      ON rj.id = rjs.race_job_id
    JOIN race_job_stat rjs_Atk
      ON rj.id = rjs_Atk.race_job_id
    JOIN race_job_stat rjs_Spd
      ON rj.id = rjs_Spd.race_job_id
    JOIN race_job_stat rjs_Def
      ON rj.id = rjs_Def.race_job_id
   WHERE r.id = 1
     AND rjs_Atk.stat_id = 4
     AND rjs_Spd.stat_id = 3
     AND rjs_Def.stat_id = 5
GROUP BY rj.id
ORDER BY total_Atk DESC
       , total_Spd DESC
       , total_Def DESC
       , total_all DESC;


  SELECT v.*
       , (v.total_Atk + v.total_Spd + v.total_Def) total_priority
    FROM (SELECT CONCAT(r.name, ' ', j.name) race_job
               , (rjs_Atk.initial + (rjs_Atk.growth * 29)) total_Atk
               , ((rjs_Spd.initial + (rjs_Spd.growth * 29)) * 5 / 3) total_Spd
               , (rjs_Def.initial + (rjs_Def.growth * 29)) total_Def
               , SUM(rjs.initial + (rjs.growth * 29)) total_all
            FROM race_job rj
            JOIN race r
              ON rj.race_id = r.id
            JOIN job j
              ON rj.job_id = j.id
            JOIN race_job_stat rjs
              ON rj.id = rjs.race_job_id
            JOIN race_job_stat rjs_Atk
              ON rj.id = rjs_Atk.race_job_id
            JOIN race_job_stat rjs_Spd
              ON rj.id = rjs_Spd.race_job_id
            JOIN race_job_stat rjs_Def
              ON rj.id = rjs_Def.race_job_id
           WHERE r.id = 1
             AND rjs_Atk.stat_id = 4
             AND rjs_Spd.stat_id = 3
             AND rjs_Def.stat_id = 5
        GROUP BY rj.id) v
ORDER BY total_priority DESC
       , total_Atk DESC
       , total_Spd DESC
       , total_Def DESC
       , total_all DESC;


  SELECT v.*
       , (v.total_Atk + v.total_Spd + v.total_Def) total_priority
    FROM (SELECT CONCAT(r.name, ' ', j.name) race_job
               , (rjs_Atk.initial + (rjs_Atk.growth * 29)) total_Atk
               , ((rjs_Spd.initial + (rjs_Spd.growth * 29)) * 5 / 3) total_Spd
               , (rjs_Def.initial + (rjs_Def.growth * 29)) total_Def
               , SUM(rjs.initial + (rjs.growth * 29)) total_all
            FROM race_job rj
            JOIN race r
              ON rj.race_id = r.id
            JOIN job j
              ON rj.job_id = j.id
            JOIN race_job_stat rjs
              ON rj.id = rjs.race_job_id
            JOIN race_job_stat rjs_Atk
              ON rj.id = rjs_Atk.race_job_id
            JOIN race_job_stat rjs_Spd
              ON rj.id = rjs_Spd.race_job_id
            JOIN race_job_stat rjs_Def
              ON rj.id = rjs_Def.race_job_id
           WHERE r.id = 1
             AND rjs_Atk.stat_id = 4
             AND rjs_Spd.stat_id = 3
             AND rjs_Def.stat_id = 5
        GROUP BY rj.id) v
ORDER BY total_priority DESC
       , total_Atk DESC
       , total_Spd DESC
       , total_Def DESC
       , total_all DESC;


  SELECT CONCAT(r.name, ' ', j.name) race_job
       , (rjs_Atk.initial + (rjs_Atk.growth * 29)) total_Atk
       , (rjs_Spd.initial + (rjs_Spd.growth * 29)) total_Spd
       , (rjs_Def.initial + (rjs_Def.growth * 29)) total_Def
       , SUM(rjs.initial + (rjs.growth * 29)) total_all
    FROM race_job rj
    JOIN race r
      ON rj.race_id = r.id
    JOIN job j
      ON rj.job_id = j.id
    JOIN race_job_stat rjs
      ON rj.id = rjs.race_job_id
    JOIN race_job_stat rjs_Atk
      ON rj.id = rjs_Atk.race_job_id
    JOIN race_job_stat rjs_Spd
      ON rj.id = rjs_Spd.race_job_id
    JOIN race_job_stat rjs_Def
      ON rj.id = rjs_Def.race_job_id
   WHERE r.id = 1
     AND rjs_Atk.stat_id = 4
     AND rjs_Spd.stat_id = 3
     AND rjs_Def.stat_id = 5
GROUP BY rj.id
ORDER BY total_Atk DESC
       , total_Spd DESC
       , total_Def DESC
       , total_all DESC;


SELECT CONCAT(r.name, ' ', j.name) race_job
     , s_Atk.name
     , (rjs_Atk.initial + (rjs_Atk.growth * 29)) total_Atk
     , s_Spd.name
     , (rjs_Spd.initial + (rjs_Spd.growth * 29)) total_Spd
     , s_Def.name
     , (rjs_Def.initial + (rjs_Def.growth * 29)) total_Def
  FROM race_job rj
  JOIN race r
    ON rj.race_id = r.id
  JOIN job j
    ON rj.job_id = j.id
  JOIN race_job_stat rjs_Atk
    ON rj.id = rjs_Atk.race_job_id
  JOIN stat s_Atk
    ON rjs_Atk.stat_id = s_Atk.id
  JOIN race_job_stat rjs_Spd
    ON rj.id = rjs_Spd.race_job_id
  JOIN stat s_Spd
    ON rjs_Spd.stat_id = s_Spd.id
  JOIN race_job_stat rjs_Def
    ON rj.id = rjs_Def.race_job_id
  JOIN stat s_Def
    ON rjs_Def.stat_id = s_Def.id
 WHERE r.id = 1
   AND s_Atk.id = 4
   AND s_Spd.id = 3
   AND s_Def.id = 5;


SELECT CONCAT(r.name, ' ', j.name) race_job
     , s.name
     , (rjs.initial + (rjs.growth * 29)) total
  FROM race_job rj
  JOIN race r
    ON rj.race_id = r.id
  JOIN job j
    ON rj.job_id = j.id
  JOIN race_job_stat rjs
    ON rj.id = rjs.race_job_id
  JOIN stat s
    ON rjs.stat_id = s.id
 WHERE r.id = 1;


SELECT CONCAT(r.name, ' ', j.name) race_job
     , s.name
     , rjs.initial
     , rjs.growth
  FROM race_job rj
  JOIN race r
    ON rj.race_id = r.id
  JOIN job j
    ON rj.job_id = j.id
  JOIN race_job_stat rjs
    ON rj.id = rjs.race_job_id
  JOIN stat s
    ON rjs.stat_id = s.id
 WHERE r.id = 1;
